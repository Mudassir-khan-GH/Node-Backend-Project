<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Posts - SnapFix</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="bg-gray-50 text-gray-800">

    <!-- Navbar -->
    <nav class="flex justify-between items-center bg-white px-6 py-3 shadow-sm">
      <a href="/" class="text-2xl font-bold text-blue-600">SnapFix.</a>
      <div class="flex gap-4 items-center">
        <a href="/api/v1/user/home" class="text-gray-700 font-medium hover:text-blue-600 transition">Home</a>
        <a href="/api/v1/user/logout" class="text-gray-700 font-medium hover:text-red-600 transition">Logout</a>
      </div>
    </nav>

    <!-- Profile Header -->
    <section class="max-w-2xl mx-auto mt-8 text-center">
      <div class="flex flex-col items-center">
        <img
          src="<%= user.image %>"
          alt="Profile Picture"
          class="w-28 h-28 rounded-full border-4 border-blue-200 object-cover shadow-sm"
        />
        <h2 class="text-2xl font-semibold mt-3"><%= user.username %></h2>
        <p class="text-gray-500 text-sm mb-6">My Posts</p>
      </div>
    </section>

    <!-- Posts Section -->
    <section class="max-w-2xl mx-auto px-4 mb-16 space-y-6">

      <% if (posts.length === 0) { %>
        <p class="text-center text-gray-500 mt-10">You haven't created any posts yet.</p>
      <% } else { %>

        <% posts.forEach(post => { %>
          <div class="bg-white shadow-sm border border-gray-200 rounded-xl p-5 hover:shadow-md transition duration-300">
            
            <!-- Post Header -->
            <div class="flex items-center gap-3 mb-3">
              <img
                src="<%= user.image || 'https://randomuser.me/api/portraits/men/1.jpg' %>"
                alt="User"
                class="w-10 h-10 rounded-full border border-blue-300 object-cover"
              />
              <div>
                <h3 class="font-semibold text-gray-800"><%= user.username %></h3>
                <p class="text-xs text-gray-500"><%= new Date(post.createdAt).toLocaleString() %></p>
              </div>
            </div>

            <!-- Post Description -->
            <p class="text-gray-700 mb-3"><%= post.description %></p>

            <!-- Post Image -->
            <% if (post.image) { %>
              <img
                src="<%= post.image %>"
                alt="Post Image"
                class="rounded-lg border border-gray-200 max-h-80 object-cover w-full mb-3"
              />
            <% } %>

            <!-- Post Actions -->
            <div class="flex justify-end">
              <form action="/api/v1/post/removePost/<%= post._id %>" method="POST">
                <img src="<%=post.image%>" alt="" hidden name="image">
                <button
                  type="submit"
                  class="text-red-500 hover:bg-red-50 border border-red-200 rounded-lg px-3 py-1 text-sm transition"
                >
                  ðŸ—‘ Remove Post
                </button>
              </form>
            </div>
          </div>
        <% }) %>

      <% } %>

    </section>
  </body>
</html>
